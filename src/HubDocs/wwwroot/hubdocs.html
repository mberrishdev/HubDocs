<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubDocs - SignalR Explorer</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2346b3e6'><path d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
    <style>
        .method-badge {
            @apply px-2 py-1 text-xs font-semibold rounded;
        }
        .method-badge.get { @apply bg-green-100 text-green-800; }
        .method-badge.post { @apply bg-blue-100 text-blue-800; }
        .method-badge.put { @apply bg-yellow-100 text-yellow-800; }
        .method-badge.delete { @apply bg-red-100 text-red-800; }
    </style>
</head>
<body class="bg-[#1a1a1a] text-gray-200 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-8 h-8">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="text-blue-500">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white">HubDocs</h1>
                        <p class="text-gray-400 mt-1">SignalR Hubs Explorer</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-sm text-gray-400">
                        <span id="hub-count">Loading hubs...</span>
                    </div>
                    <a href="/hubdocs/hubdocs.json" 
                       class="inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-200 bg-[#2d2d2d] rounded-md hover:bg-[#363636] transition-colors"
                       target="_blank">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        JSON
                    </a>
                </div>
            </div>
        </header>

        <div id="hubs" class="space-y-6"></div>
    </div>

    <script>
    fetch('/hubdocs/hubdocs.json')
        .then(res => res.json())
        .then(hubs => {
            const container = document.getElementById('hubs');
            const hubCount = document.getElementById('hub-count');
            
            if (hubs.length === 0) {
                container.innerHTML = '<div class="bg-[#2d2d2d] rounded-lg p-6 text-center"><p class="text-gray-400">No SignalR hubs found.</p></div>';
                hubCount.textContent = '0 hubs';
                return;
            }

            hubCount.textContent = `${hubs.length} hub${hubs.length === 1 ? '' : 's'}`;

            hubs.forEach(hub => {
                const hubCard = document.createElement('div');
                hubCard.className = 'bg-[#2d2d2d] rounded-lg overflow-hidden border border-[#3d3d3d]';

                const methods = hub.methods.map(m => {
                    const params = m.parameterTypes.map((p, i) => 
                        `<span class="text-blue-400">${p}</span>`
                    ).join(', ');

                    return `
                        <div class="border-t border-[#3d3d3d] p-4 hover:bg-[#363636] transition-colors">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2">
                                        <h3 class="text-lg font-semibold text-white">${m.methodName}</h3>
                                    </div>
                                    <div class="mt-2 text-sm text-gray-400">
                                        <span class="text-gray-500">Parameters:</span> 
                                        <span class="font-mono">(${params})</span>
                                    </div>
                                    <div class="mt-1 text-sm text-gray-400">
                                        <span class="text-gray-500">Returns:</span> 
                                        <span class="font-mono text-blue-400">${m.returnType}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                hubCard.innerHTML = `
                    <div class="p-4 bg-[#363636] border-b border-[#3d3d3d]">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-xl font-semibold text-white">${hub.hubName}</h2>
                                <p class="text-sm text-gray-400 mt-1">${hub.hubFullName}</p>
                            </div>
                            <button class="text-gray-400 hover:text-white transition-colors" onclick="this.closest('.hub-card').querySelector('.methods').classList.toggle('hidden')">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="methods hidden">${methods}</div>
                `;

                hubCard.classList.add('hub-card');
                container.appendChild(hubCard);
            });

            // Initialize syntax highlighting
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        })
        .catch(error => {
            console.error('Error loading hubs:', error);
            document.getElementById('hubs').innerHTML = `
                <div class="bg-red-900/20 border border-red-900/50 rounded-lg p-6 text-center">
                    <p class="text-red-400">Error loading hubs. Please try again later.</p>
                </div>
            `;
        });
    </script>
</body>
</html> 